{% extends "menu/layout.html" %}
{% load static %}
{% block body %}

<div class="container">
    <div class="row" id="product">
        <div class="col-lg-6 img-product">
                <img class="img-fluid" src="{{ item.image.url }}" alt="connect" style="max-height:600px">
        </div>
        <div class="col-lg-6 acution-description">
            <p class="product-title"><i>{{item.name}}</i></p>
            <p class="product-description">{{item.description}}</p>
        </div>
    </div>
    <div>
        <center>
            <input type="number" style="width: 100px;" id="{{ item.id }}q" value=0>
        </center>
        <div>
            <div class="btn-middle">
                <button type="button" class="btn btn-auction btn-send-comment" id="{{ item.id }}" data-toggle="modal" data-target="#create">Add to Cart</button>
            </div>
        </div>
    </div>
    <hr>
    <div>
        <div class="btn-middle">
            <button type="button" class="btn btn-auction btn-send-comment" data-toggle="modal" data-target="#create">Leave a comment</button>
        </div>
    </div>
</div>

<script>
    console.log('running');
    const buttons = document.getElementsByTagName("button");

    const buttonPressed = e => { 
        // console.log(`ID of ${e.target.innerHTML} is ${e.target.id}`);
        // console.log(`ID of ${e.target.innerHTML} is ${e.target.id+'q'}`);
        const url = window.location.origin+`/cart/add/${e.target.id}/`+document.getElementById(`${e.target.id+'q'}`).value;
        fetch(url);
    }

    for (let button of buttons) 
        button.addEventListener("click", buttonPressed);
</script>
{% endblock %}